---
title: 3186. 施咒的最大总伤害 - 力扣（LeetCode）
alise: 3186. 施咒的最大总伤害 - 力扣（LeetCode）
source: https://leetcode.cn/problems/maximum-total-damage-with-spell-casting/description/?envType=daily-question&envId=2025-10-11
created: 2025-10-11
author:
  - "[[力扣 LeetCode]]"
tags:
  - Array
  - Hash Table
  - Dynamic Programming (DP)
  - Counting
  - Sorting
  - excalidraw
excalidraw-plugin: parsed
excalidraw-open-md: true
---


[3186\. 施咒的最大总伤害](https://leetcode.cn/problems/maximum-total-damage-with-spell-casting/)

已解答

1841

相关标签

相关企业

提示

一个魔法师有许多不同的咒语。

给你一个数组 `power` ，其中每个元素表示一个咒语的伤害值，可能会有多个咒语有相同的伤害值。

已知魔法师使用伤害值为 `power[i]` 的咒语时，他们就 **不能** 使用伤害为 `power[i] - 2`  ， `power[i] - 1`  ， `power[i] + 1`  或者  `power[i] + 2` 的咒语。

每个咒语最多只能被使用 **一次** 。

请你返回这个魔法师可以达到的伤害值之和的 **最大值** 。

**示例 1：**

**输入：** power = \[1,1,3,4\]

**输出：** 6

**解释：**

可以使用咒语 0，1，3，伤害值分别为 1，1，4，总伤害值为 6 。

**示例 2：**

**输入：** power = \[7,1,6,6\]

**输出：** 13

**解释：**

可以使用咒语 1，2，3，伤害值分别为 1，6，6，总伤害值为 13 。

**提示：**

- `1 <= power.length <= 10<sup>5</sup>`
- `1 <= power[i] <= 10<sup>9</sup>`




## 思路


## 解法
```` tab
tab: C++解法一
```cpp

```


tab: C++解法二
```cpp

```

tab: python解法一
```python

```

tab: vault
```include cpp
@/file_path
```

```` 

## 思考题



# Excalidraw Data

## Text Elements
方框样式 ^8juc5L0p

蓝色样式 ^d7m0JvYG

红色样式 ^LeoI6EHQ

方框样式 ^F4YBsqSj

%%
## Drawing
```compressed-json
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
```
%%

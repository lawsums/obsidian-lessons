### GDB常用指令分类详解
GDB的指令可以按调试流程分为**启动与退出**、**断点操作**、**程序执行**、**查看信息**、**变量操作**等几大类，下面是最常用的指令及说明：

#### 1. 启动与退出
| 指令 | 说明 | 示例 |
|------|------|------|
| `gdb <程序名>` | 启动GDB并加载可调试程序（程序需用`-g`编译） | `gdb ./test` |
| `gdb <程序名> <核心转储文件>` | 加载程序和核心转储文件（调试崩溃问题） | `gdb ./test core.12345` |
| `run [参数]` / `r [参数]` | 运行程序，可传递命令行参数 | `r -f test.txt` |
| `quit` / `q` | 退出GDB | `q` |
| `start` | 启动程序并停在`main`函数第一行（比`run`更适合调试） | `start` |

#### 2. 断点操作（核心）
| 指令 | 说明 | 示例 |
|------|------|------|
| `break <位置>` / `b <位置>` | 设置断点 | <br>- 按行号：`b 10`（第10行）<br>- 按函数名：`b main`（main函数）<br>- 按文件+行号：`b test.c:20` |
| `tbreak <位置>` / `tb <位置>` | 设置临时断点（触发一次后自动删除） | `tb 15` |
| `info breakpoints` / `info b` | 查看所有断点信息（编号、位置、状态） | `info b` |
| `delete <断点编号>` / `d <编号>` | 删除指定断点 | `d 1`（删除编号为1的断点） |
| `disable <断点编号>` / `dis <编号>` | 禁用断点（保留但不生效） | `dis 2` |
| `enable <断点编号>` / `ena <编号>` | 启用禁用的断点 | `ena 2` |
| `clear <位置>` | 清除指定位置的断点 | `clear main`（清除main函数的断点） |

#### 3. 程序执行控制
| 指令 | 说明 | 示例 |
|------|------|------|
| `next` / `n` | 单步执行（跳过函数调用，“逐行”执行） | `n` |
| `step` / `s` | 单步执行（进入函数调用，“逐语句”执行） | `s` |
| `finish` | 执行完当前函数并返回上一层 | `finish` |
| `continue` / `c` | 继续执行程序直到下一个断点或结束 | `c` |
| `until <行号>` / `u <行号>` | 执行到指定行（跳过循环，适合快速跳出循环） | `u 30` |
| `return [值]` | 强制当前函数返回，可选指定返回值 | `return 0` |

#### 4. 查看信息（变量/内存/栈）
| 指令 | 说明 | 示例 |
|------|------|------|
| `print <变量/表达式>` / `p <变量>` | 打印变量/表达式的值 | <br>- `p a`（打印变量a）<br>- `p a+b`（打印表达式结果）<br>- `p *ptr`（打印指针指向的内容） |
| `print/x <变量>` | 以十六进制打印值（`/d`十进制，`/s`字符串，`/c`字符） | `p/x num` |
| `watch <变量>` | 设置观察点（变量值改变时暂停） | `watch count` |
| `info watchpoints` | 查看所有观察点 | `info watchpoints` |
| `backtrace` / `bt` | 查看调用栈（显示函数调用层级） | `bt`（显示所有栈帧）<br>`bt 5`（只显示前5层） |
| `frame <栈帧编号>` / `f <编号>` | 切换到指定栈帧（配合`bt`使用） | `f 0`（切换到当前执行的栈帧） |
| `list` / `l` | 查看当前行附近的代码 | `l`（显示当前行前后10行）<br>`l 10,20`（显示10-20行） |
| `x/<nfu> <地址>` | 查看内存内容（n=数量，f=格式，u=单位） | `x/10xw 0x7fffffffddd0`（查看10个4字节，十六进制） |

#### 5. 其他实用指令
| 指令 | 说明 | 示例 |
|------|------|------|
| `set variable <变量>=<值>` | 修改变量的值（调试时临时改值） | `set variable a=10` |
| `help <指令>` | 查看指令的详细说明 | `help break`（查看break指令用法） |
| `dir <目录>` | 添加源码搜索目录（调试时找不到源码时用） | `dir ./src` |

### 调试示例流程（快速上手）
假设你有一个`test.c`程序，编译时加`-g`（`gcc -g test.c -o test`），调试流程如下：
```bash
# 1. 启动GDB
gdb ./test

# 2. 启动程序并停在main函数
(gdb) start

# 3. 设置断点（第20行）
(gdb) b 20

# 4. 查看断点
(gdb) info b

# 5. 继续执行到断点
(gdb) c

# 6. 打印变量值
(gdb) p result

# 7. 单步执行（进入函数）
(gdb) s

# 8. 查看调用栈
(gdb) bt

# 9. 继续执行直到结束
(gdb) c

# 10. 退出GDB
(gdb) q
```

### 总结
1. **核心基础**：启动用`gdb <程序>`/`start`，退出用`q`；断点用`b`，执行用`n/s/c`。
2. **查看关键**：打印变量用`p`，查看调用栈用`bt`，观察变量变化用`watch`。
3. **效率技巧**：`until`跳过循环，`finish`跳出当前函数，`set variable`临时修改变量值。
